import{s as vt,n as ht,r as mt,c as bt,o as gt,i as Et}from"../chunks/scheduler.DrKogcTQ.js";import{S as Ct,i as Dt,e as o,s as m,c as r,k as x,f as b,a as C,d as i,l as n,g as z,h as t,m as Z,n as lt,o as Tt,t as $,b as tt,j as at}from"../chunks/index.01Pfsw30.js";import{e as pt,a as it}from"../chunks/axios.Bvw451kA.js";import{p as At}from"../chunks/stores.CH5n1TCg.js";function ft(s,a,g){const E=s.slice();return E[1]=a[g],E}function _t(s){let a,g,E=s[1].assetName+"",p,I,c,v=s[1].assetState+"",q,j,_,U=s[1].purchaseDate+"",D,y,T,u=s[1].guaranteeEnd+"",M,L,w,N=s[1].personId+"",k,W,O,B='<button type="button" class="btn btn-primary">Edit</button>',J,A,S,G,H,K,Y,P,F;function et(){return s[7](s[1])}return{c(){a=o("tr"),g=o("td"),p=$(E),I=m(),c=o("td"),q=$(v),j=m(),_=o("td"),D=$(U),y=m(),T=o("td"),M=$(u),L=m(),w=o("td"),k=$(N),W=m(),O=o("td"),O.innerHTML=B,J=m(),A=o("td"),S=o("button"),G=$("Unassign"),Y=m(),this.h()},l(V){a=r(V,"TR",{});var l=C(a);g=r(l,"TD",{});var X=C(g);p=tt(X,E),X.forEach(i),I=b(l),c=r(l,"TD",{});var st=C(c);q=tt(st,v),st.forEach(i),j=b(l),_=r(l,"TD",{});var R=C(_);D=tt(R,U),R.forEach(i),y=b(l),T=r(l,"TD",{});var f=C(T);M=tt(f,u),f.forEach(i),L=b(l),w=r(l,"TD",{});var e=C(w);k=tt(e,N),e.forEach(i),W=b(l),O=r(l,"TD",{"data-svelte-h":!0}),x(O)!=="svelte-11qxnmu"&&(O.innerHTML=B),J=b(l),A=r(l,"TD",{});var d=C(A);S=r(d,"BUTTON",{type:!0,class:!0});var h=C(S);G=tt(h,"Unassign"),h.forEach(i),d.forEach(i),Y=b(l),l.forEach(i),this.h()},h(){n(S,"type","button"),n(S,"class",H="btn "+(s[1].assetState==="Assigned"?"btn-primary":"btn-secondary")),S.disabled=K=s[1].assetState!=="Assigned"},m(V,l){z(V,a,l),t(a,g),t(g,p),t(a,I),t(a,c),t(c,q),t(a,j),t(a,_),t(_,D),t(a,y),t(a,T),t(T,M),t(a,L),t(a,w),t(w,k),t(a,W),t(a,O),t(a,J),t(a,A),t(A,S),t(S,G),t(a,Y),P||(F=lt(S,"click",function(){Et(s[1].assetState==="Assigned"?et:null)&&(s[1].assetState==="Assigned"?et:null).apply(this,arguments)}),P=!0)},p(V,l){s=V,l&1&&E!==(E=s[1].assetName+"")&&at(p,E),l&1&&v!==(v=s[1].assetState+"")&&at(q,v),l&1&&U!==(U=s[1].purchaseDate+"")&&at(D,U),l&1&&u!==(u=s[1].guaranteeEnd+"")&&at(M,u),l&1&&N!==(N=s[1].personId+"")&&at(k,N),l&1&&H!==(H="btn "+(s[1].assetState==="Assigned"?"btn-primary":"btn-secondary"))&&n(S,"class",H),l&1&&K!==(K=s[1].assetState!=="Assigned")&&(S.disabled=K)},d(V){V&&i(a),P=!1,F()}}}function yt(s){let a,g="Create Asset",E,p,I,c,v,q="Asset",j,_,U,D,y,T,u="Purchase Date",M,L,w,N,k,W="guaranteeEnd",O,B,J,A,S="Submit",G,H,K="All Assets",Y,P,F,et='<tr><th scope="col">Name</th> <th scope="col">State</th> <th scope="col">Purchase Date</th> <th scope="col">Guarantee End</th> <th scope="col">Person</th> <th scope="col">Actions</th></tr>',V,l,X,st,R=pt(s[0]),f=[];for(let e=0;e<R.length;e+=1)f[e]=_t(ft(s,R,e));return{c(){a=o("h1"),a.textContent=g,E=m(),p=o("form"),I=o("div"),c=o("div"),v=o("label"),v.textContent=q,j=m(),_=o("input"),U=m(),D=o("div"),y=o("div"),T=o("label"),T.textContent=u,M=m(),L=o("input"),w=m(),N=o("div"),k=o("label"),k.textContent=W,O=m(),B=o("input"),J=m(),A=o("button"),A.textContent=S,G=m(),H=o("h1"),H.textContent=K,Y=m(),P=o("table"),F=o("thead"),F.innerHTML=et,V=m(),l=o("tbody");for(let e=0;e<f.length;e+=1)f[e].c();this.h()},l(e){a=r(e,"H1",{class:!0,"data-svelte-h":!0}),x(a)!=="svelte-2752g2"&&(a.textContent=g),E=b(e),p=r(e,"FORM",{class:!0});var d=C(p);I=r(d,"DIV",{class:!0});var h=C(I);c=r(h,"DIV",{class:!0});var Q=C(c);v=r(Q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),x(v)!=="svelte-1rp1nnd"&&(v.textContent=q),j=b(Q),_=r(Q,"INPUT",{class:!0,id:!0,type:!0}),Q.forEach(i),h.forEach(i),U=b(d),D=r(d,"DIV",{class:!0});var nt=C(D);y=r(nt,"DIV",{class:!0});var ot=C(y);T=r(ot,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),x(T)!=="svelte-1hiaxaq"&&(T.textContent=u),M=b(ot),L=r(ot,"INPUT",{class:!0,id:!0,type:!0}),ot.forEach(i),w=b(nt),N=r(nt,"DIV",{class:!0});var rt=C(N);k=r(rt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),x(k)!=="svelte-e3e46y"&&(k.textContent=W),O=b(rt),B=r(rt,"INPUT",{class:!0,id:!0,type:!0}),rt.forEach(i),nt.forEach(i),J=b(d),A=r(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),x(A)!=="svelte-1rdh4yl"&&(A.textContent=S),d.forEach(i),G=b(e),H=r(e,"H1",{"data-svelte-h":!0}),x(H)!=="svelte-10ruias"&&(H.textContent=K),Y=b(e),P=r(e,"TABLE",{class:!0});var ut=C(P);F=r(ut,"THEAD",{"data-svelte-h":!0}),x(F)!=="svelte-1hvmccl"&&(F.innerHTML=et),V=b(ut),l=r(ut,"TBODY",{});var dt=C(l);for(let ct=0;ct<f.length;ct+=1)f[ct].l(dt);dt.forEach(i),ut.forEach(i),this.h()},h(){n(a,"class","mt-3"),n(v,"class","form-label"),n(v,"for","assetName"),n(_,"class","form-control"),n(_,"id","assetName"),n(_,"type","text"),n(c,"class","col"),n(I,"class","row mb-3"),n(T,"class","form-label"),n(T,"for","earnings"),n(L,"class","form-control"),n(L,"id","purchaseDate"),n(L,"type","date"),n(y,"class","col"),n(k,"class","form-label"),n(k,"for","earnings"),n(B,"class","form-control"),n(B,"id","guraranteeEnd"),n(B,"type","date"),n(N,"class","col"),n(D,"class","row mb-3"),n(A,"type","button"),n(A,"class","btn btn-primary"),n(p,"class","mb-5"),n(P,"class","table")},m(e,d){z(e,a,d),z(e,E,d),z(e,p,d),t(p,I),t(I,c),t(c,v),t(c,j),t(c,_),Z(_,s[1].assetName),t(p,U),t(p,D),t(D,y),t(y,T),t(y,M),t(y,L),Z(L,s[1].purchaseDate),t(D,w),t(D,N),t(N,k),t(N,O),t(N,B),Z(B,s[1].guaranteeEnd),t(p,J),t(p,A),z(e,G,d),z(e,H,d),z(e,Y,d),z(e,P,d),t(P,F),t(P,V),t(P,l);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(l,null);X||(st=[lt(_,"input",s[4]),lt(L,"input",s[5]),lt(B,"input",s[6]),lt(A,"click",s[2])],X=!0)},p(e,[d]){if(d&2&&_.value!==e[1].assetName&&Z(_,e[1].assetName),d&2&&Z(L,e[1].purchaseDate),d&2&&Z(B,e[1].guaranteeEnd),d&9){R=pt(e[0]);let h;for(h=0;h<R.length;h+=1){const Q=ft(e,R,h);f[h]?f[h].p(Q,d):(f[h]=_t(Q),f[h].c(),f[h].m(l,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=R.length}},i:ht,o:ht,d(e){e&&(i(a),i(E),i(p),i(G),i(H),i(Y),i(P)),Tt(f,e),X=!1,mt(st)}}}function Nt(s,a,g){let E;bt(s,At,u=>g(9,E=u));const p=E.url.origin;let I=[],c={assetName:null,purchaseDate:null,guaranteeEnd:null,assetState:null,personId:null};gt(()=>{v(),q()});function v(){it.get(p+"/api/asset").then(u=>g(0,I=u.data)).catch(u=>{alert("Could not get assets"),console.log(u)})}function q(){it.get(p+"/api/person").then(u=>u.data).catch(u=>{alert("Could not get persons"),console.log(u)})}function j(){it.post(p+"/api/asset",c,{headers:{"Content-Type":"application/json"}}).then(u=>{alert("Asset created"),v()}).catch(u=>{alert("Could not create asset"),console.log(u)})}function _(u){it.put(`${p}/api/asset/${u}/unassign`).then(M=>{alert("Asset unassigned"),v()}).catch(M=>{alert("Failed to unassign asset"),console.log(M)})}function U(){c.assetName=this.value,g(1,c)}function D(){c.purchaseDate=this.value,g(1,c)}function y(){c.guaranteeEnd=this.value,g(1,c)}return[I,c,j,_,U,D,y,u=>_(u.id)]}class Pt extends Ct{constructor(a){super(),Dt(this,a,Nt,yt,vt,{})}}export{Pt as component};
