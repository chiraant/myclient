import{s as Ne,n as _e,r as De,c as Ie,o as Oe,i as Pe,b as Re}from"../chunks/scheduler.B8ClD4bx.js";import{S as Ue,i as Be,e as p,s as D,c as m,k as J,f as y,a as S,d,l as E,g as H,h as n,m as X,n as K,o as ye,t as Z,b as $,j as de,p as Le,q as be}from"../chunks/index.o_Xq34i8.js";import{e as he,a as ce}from"../chunks/axios.Bvw451kA.js";import{p as He}from"../chunks/stores.B3hbzJZs.js";function ge(e,t,s){const i=e.slice();return i[3]=t[s],i[22]=t,i[23]=s,i}function Ee(e,t,s){const i=e.slice();return i[24]=t[s],i}function Ve(e){let t;return{c(){t=p("span")},l(s){t=m(s,"SPAN",{}),S(t).forEach(d)},m(s,i){H(s,t,i)},p:_e,d(s){s&&d(t)}}}function je(e){let t,s,i="select Email to assign",u,o,l,v,N,B,C=he(e[2]),b=[];for(let c=0;c<C.length;c+=1)b[c]=ke(Ee(e,C,c));function O(){e[10].call(t,e[3])}function L(){return e[11](e[3])}return{c(){t=p("select"),s=p("option"),s.textContent=i;for(let c=0;c<b.length;c+=1)b[c].c();u=D(),o=p("button"),l=Z("Assign"),this.h()},l(c){t=m(c,"SELECT",{});var T=S(t);s=m(T,"OPTION",{"data-svelte-h":!0}),J(s)!=="svelte-zpfev4"&&(s.textContent=i);for(let A=0;A<b.length;A+=1)b[A].l(T);T.forEach(d),u=y(c),o=m(c,"BUTTON",{type:!0,class:!0});var g=S(o);l=$(g,"Assign"),g.forEach(d),this.h()},h(){s.__value="",X(s,s.__value),e[0][e[3].id]===void 0&&Re(O),E(o,"type","button"),E(o,"class","btn btn-primary"),o.disabled=v=!e[0][e[3].id]},m(c,T){H(c,t,T),n(t,s);for(let g=0;g<b.length;g+=1)b[g]&&b[g].m(t,null);be(t,e[0][e[3].id],!0),H(c,u,T),H(c,o,T),n(o,l),N||(B=[K(t,"change",O),K(o,"click",L)],N=!0)},p(c,T){if(e=c,T&4){C=he(e[2]);let g;for(g=0;g<C.length;g+=1){const A=Ee(e,C,g);b[g]?b[g].p(A,T):(b[g]=ke(A),b[g].c(),b[g].m(t,null))}for(;g<b.length;g+=1)b[g].d(1);b.length=C.length}T&7&&be(t,e[0][e[3].id]),T&7&&v!==(v=!e[0][e[3].id])&&(o.disabled=v)},d(c){c&&(d(t),d(u),d(o)),ye(b,c),N=!1,De(B)}}}function ke(e){let t,s=e[24].email+"",i,u;return{c(){t=p("option"),i=Z(s),this.h()},l(o){t=m(o,"OPTION",{});var l=S(t);i=$(l,s),l.forEach(d),this.h()},h(){t.__value=u=e[24].email,X(t,t.__value)},m(o,l){H(o,t,l),n(t,i)},p(o,l){l&4&&s!==(s=o[24].email+"")&&de(i,s),l&4&&u!==(u=o[24].email)&&(t.__value=u,X(t,t.__value))},d(o){o&&d(t)}}}function Ce(e){let t,s="To Repair",i,u;function o(){return e[13](e[3])}return{c(){t=p("button"),t.textContent=s},l(l){t=m(l,"BUTTON",{"data-svelte-h":!0}),J(t)!=="svelte-9ks2rc"&&(t.textContent=s)},m(l,v){H(l,t,v),i||(u=K(t,"click",o),i=!0)},p(l,v){e=l},d(l){l&&d(t),i=!1,u()}}}function Te(e){let t,s="Repaired",i,u;function o(){return e[14](e[3])}return{c(){t=p("button"),t.textContent=s,this.h()},l(l){t=m(l,"BUTTON",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1yu6srj"&&(t.textContent=s),this.h()},h(){E(t,"class","btn btn-success")},m(l,v){H(l,t,v),i||(u=K(t,"click",o),i=!0)},p(l,v){e=l},d(l){l&&d(t),i=!1,u()}}}function Ae(e){let t,s="Dispose",i,u;function o(){return e[15](e[3])}return{c(){t=p("button"),t.textContent=s},l(l){t=m(l,"BUTTON",{"data-svelte-h":!0}),J(t)!=="svelte-x4471b"&&(t.textContent=s)},m(l,v){H(l,t,v),i||(u=K(t,"click",o),i=!0)},p(l,v){e=l},d(l){l&&d(t),i=!1,u()}}}function Se(e){let t,s,i=e[3].assetName+"",u,o,l,v=e[3].assetState+"",N,B,C,b=e[3].purchaseDate+"",O,L,c,T=e[3].guaranteeEnd+"",g,A,z,V=e[3].personId+"",j,x,G,F,r,k,q,Q,w,ne,R,M,Y,oe,ee,W;function re(U,_){return U[3].assetState==="Unassigned"?je:Ve}let te=re(e),P=te(e);function I(){return e[12](e[3])}let a=e[3].assetState==="Assigned"&&Ce(e),f=e[3].assetState==="InRepair"&&Te(e),h=e[3].assetState!=="Disposed"&&Ae(e);return{c(){t=p("tr"),s=p("td"),u=Z(i),o=D(),l=p("td"),N=Z(v),B=D(),C=p("td"),O=Z(b),L=D(),c=p("td"),g=Z(T),A=D(),z=p("td"),j=Z(V),x=D(),G=p("td"),P.c(),F=D(),r=p("td"),k=p("button"),q=Z("Unassign"),ne=D(),R=p("td"),a&&a.c(),M=D(),f&&f.c(),Y=D(),h&&h.c(),oe=D(),this.h()},l(U){t=m(U,"TR",{});var _=S(t);s=m(_,"TD",{});var se=S(s);u=$(se,i),se.forEach(d),o=y(_),l=m(_,"TD",{});var le=S(l);N=$(le,v),le.forEach(d),B=y(_),C=m(_,"TD",{});var ae=S(C);O=$(ae,b),ae.forEach(d),L=y(_),c=m(_,"TD",{});var fe=S(c);g=$(fe,T),fe.forEach(d),A=y(_),z=m(_,"TD",{});var ie=S(z);j=$(ie,V),ie.forEach(d),x=y(_),G=m(_,"TD",{});var pe=S(G);P.l(pe),pe.forEach(d),F=y(_),r=m(_,"TD",{});var me=S(r);k=m(me,"BUTTON",{type:!0,class:!0});var ve=S(k);q=$(ve,"Unassign"),ve.forEach(d),me.forEach(d),ne=y(_),R=m(_,"TD",{});var ue=S(R);a&&a.l(ue),M=y(ue),f&&f.l(ue),Y=y(ue),h&&h.l(ue),ue.forEach(d),oe=y(_),_.forEach(d),this.h()},h(){E(k,"type","button"),E(k,"class",Q="btn "+(e[3].assetState==="Assigned"||e[3].assetState==="InRepair"?"btn-primary":"btn-secondary")),k.disabled=w=e[3].assetState!=="Assigned"&&e[3].assetState!=="InRepair"},m(U,_){H(U,t,_),n(t,s),n(s,u),n(t,o),n(t,l),n(l,N),n(t,B),n(t,C),n(C,O),n(t,L),n(t,c),n(c,g),n(t,A),n(t,z),n(z,j),n(t,x),n(t,G),P.m(G,null),n(t,F),n(t,r),n(r,k),n(k,q),n(t,ne),n(t,R),a&&a.m(R,null),n(R,M),f&&f.m(R,null),n(R,Y),h&&h.m(R,null),n(t,oe),ee||(W=K(k,"click",function(){Pe(e[3].assetState==="Assigned"||e[3].assetState==="InRepair"?I:null)&&(e[3].assetState==="Assigned"||e[3].assetState==="InRepair"?I:null).apply(this,arguments)}),ee=!0)},p(U,_){e=U,_&2&&i!==(i=e[3].assetName+"")&&de(u,i),_&2&&v!==(v=e[3].assetState+"")&&de(N,v),_&2&&b!==(b=e[3].purchaseDate+"")&&de(O,b),_&2&&T!==(T=e[3].guaranteeEnd+"")&&de(g,T),_&2&&V!==(V=e[3].personId+"")&&de(j,V),te===(te=re(e))&&P?P.p(e,_):(P.d(1),P=te(e),P&&(P.c(),P.m(G,null))),_&6&&Q!==(Q="btn "+(e[3].assetState==="Assigned"||e[3].assetState==="InRepair"?"btn-primary":"btn-secondary"))&&E(k,"class",Q),_&6&&w!==(w=e[3].assetState!=="Assigned"&&e[3].assetState!=="InRepair")&&(k.disabled=w),e[3].assetState==="Assigned"?a?a.p(e,_):(a=Ce(e),a.c(),a.m(R,M)):a&&(a.d(1),a=null),e[3].assetState==="InRepair"?f?f.p(e,_):(f=Te(e),f.c(),f.m(R,Y)):f&&(f.d(1),f=null),e[3].assetState!=="Disposed"?h?h.p(e,_):(h=Ae(e),h.c(),h.m(R,null)):h&&(h.d(1),h=null)},d(U){U&&d(t),P.d(),a&&a.d(),f&&f.d(),h&&h.d(),ee=!1,W()}}}function Fe(e){let t,s="Create Asset",i,u,o,l,v,N="Asset",B,C,b,O,L,c,T="Purchase Date",g,A,z,V,j,x="guaranteeEnd",G,F,r,k,q="Submit",Q,w,ne="All Assets",R,M,Y,oe='<tr><th scope="col">Name</th> <th scope="col">State</th> <th scope="col">Purchase Date</th> <th scope="col">Guarantee End</th> <th scope="col">Person</th> <th scope="col">Actions</th></tr>',ee,W,re,te,P=he(e[1]),I=[];for(let a=0;a<P.length;a+=1)I[a]=Se(ge(e,P,a));return{c(){t=p("h1"),t.textContent=s,i=D(),u=p("form"),o=p("div"),l=p("div"),v=p("label"),v.textContent=N,B=D(),C=p("input"),b=D(),O=p("div"),L=p("div"),c=p("label"),c.textContent=T,g=D(),A=p("input"),z=D(),V=p("div"),j=p("label"),j.textContent=x,G=D(),F=p("input"),r=D(),k=p("button"),k.textContent=q,Q=D(),w=p("h1"),w.textContent=ne,R=D(),M=p("table"),Y=p("thead"),Y.innerHTML=oe,ee=D(),W=p("tbody");for(let a=0;a<I.length;a+=1)I[a].c();this.h()},l(a){t=m(a,"H1",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-2752g2"&&(t.textContent=s),i=y(a),u=m(a,"FORM",{class:!0});var f=S(u);o=m(f,"DIV",{class:!0});var h=S(o);l=m(h,"DIV",{class:!0});var U=S(l);v=m(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),J(v)!=="svelte-1rp1nnd"&&(v.textContent=N),B=y(U),C=m(U,"INPUT",{class:!0,id:!0,type:!0}),U.forEach(d),h.forEach(d),b=y(f),O=m(f,"DIV",{class:!0});var _=S(O);L=m(_,"DIV",{class:!0});var se=S(L);c=m(se,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),J(c)!=="svelte-1hiaxaq"&&(c.textContent=T),g=y(se),A=m(se,"INPUT",{class:!0,id:!0,type:!0}),se.forEach(d),z=y(_),V=m(_,"DIV",{class:!0});var le=S(V);j=m(le,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),J(j)!=="svelte-e3e46y"&&(j.textContent=x),G=y(le),F=m(le,"INPUT",{class:!0,id:!0,type:!0}),le.forEach(d),_.forEach(d),r=y(f),k=m(f,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(k)!=="svelte-1rdh4yl"&&(k.textContent=q),f.forEach(d),Q=y(a),w=m(a,"H1",{"data-svelte-h":!0}),J(w)!=="svelte-10ruias"&&(w.textContent=ne),R=y(a),M=m(a,"TABLE",{class:!0});var ae=S(M);Y=m(ae,"THEAD",{"data-svelte-h":!0}),J(Y)!=="svelte-1hvmccl"&&(Y.innerHTML=oe),ee=y(ae),W=m(ae,"TBODY",{});var fe=S(W);for(let ie=0;ie<I.length;ie+=1)I[ie].l(fe);fe.forEach(d),ae.forEach(d),this.h()},h(){E(t,"class","mt-3"),E(v,"class","form-label"),E(v,"for","assetName"),E(C,"class","form-control"),E(C,"id","assetName"),E(C,"type","text"),E(l,"class","col"),E(o,"class","row mb-3"),E(c,"class","form-label"),E(c,"for","earnings"),E(A,"class","form-control"),E(A,"id","purchaseDate"),E(A,"type","date"),E(L,"class","col"),E(j,"class","form-label"),E(j,"for","earnings"),E(F,"class","form-control"),E(F,"id","guraranteeEnd"),E(F,"type","date"),E(V,"class","col"),E(O,"class","row mb-3"),E(k,"type","button"),E(k,"class","btn btn-primary"),E(u,"class","mb-5"),E(M,"class","table")},m(a,f){H(a,t,f),H(a,i,f),H(a,u,f),n(u,o),n(o,l),n(l,v),n(l,B),n(l,C),X(C,e[3].assetName),n(u,b),n(u,O),n(O,L),n(L,c),n(L,g),n(L,A),X(A,e[3].purchaseDate),n(O,z),n(O,V),n(V,j),n(V,G),n(V,F),X(F,e[3].guaranteeEnd),n(u,r),n(u,k),H(a,Q,f),H(a,w,f),H(a,R,f),H(a,M,f),n(M,Y),n(M,ee),n(M,W);for(let h=0;h<I.length;h+=1)I[h]&&I[h].m(W,null);re||(te=[K(C,"input",e[7]),K(A,"input",e[8]),K(F,"input",e[9]),K(k,"click",e[5])],re=!0)},p(a,[f]){if(f&8&&C.value!==a[3].assetName&&X(C,a[3].assetName),f&8&&X(A,a[3].purchaseDate),f&8&&X(F,a[3].guaranteeEnd),f&87){P=he(a[1]);let h;for(h=0;h<P.length;h+=1){const U=ge(a,P,h);I[h]?I[h].p(U,f):(I[h]=Se(U),I[h].c(),I[h].m(W,null))}for(;h<I.length;h+=1)I[h].d(1);I.length=P.length}},i:_e,o:_e,d(a){a&&(d(t),d(i),d(u),d(Q),d(w),d(R),d(M)),ye(I,a),re=!1,De(te)}}}function Me(e,t,s){let i;Ie(e,He,r=>s(16,i=r));const u=i.url.origin;let o={},l=[],v=[],N={assetName:null,purchaseDate:null,guaranteeEnd:null,assetState:null,personId:null};Oe(()=>{b(),O()});async function B(r,k){try{const q=await ce.put(`${u}/api/asset/${r}/${k}`);alert("Asset state updated to "+k),C()}catch(q){console.error("Failed to update asset state",q),alert("Failed to update asset state")}}async function C(){try{const r=await ce.get(`${u}/api/asset`);s(1,l=r.data)}catch(r){console.error("Error fetching assets",r)}}C();function b(){ce.get(`${u}/api/asset`).then(r=>{s(1,l=r.data),l.forEach(k=>{s(0,o[k.id]="",o)})}).catch(r=>console.error("Error fetching assets",r))}function O(){ce.get(u+"/api/person").then(r=>s(2,v=r.data)).catch(r=>{alert("Could not get persons"),console.log(r)})}function L(){ce.post(u+"/api/asset",N,{headers:{"Content-Type":"application/json"}}).then(r=>{alert("Asset created"),b()}).catch(r=>{alert("Could not create asset"),console.log(r)})}function c(r){if(!o[r]){alert("Please select an email to assign");return}const k={assetId:r,personEmail:o[r]};ce.put(`${u}/api/service/assignasset`,k,{headers:{"Content-Type":"application/json"}}).then(q=>{alert("Asset assigned"),b()}).catch(q=>{alert("Failed to assign asset"),console.error(q)})}function T(){N.assetName=this.value,s(3,N)}function g(){N.purchaseDate=this.value,s(3,N)}function A(){N.guaranteeEnd=this.value,s(3,N)}function z(r){o[r.id]=Le(this),s(0,o),s(2,v)}return[o,l,v,N,B,L,c,T,g,A,z,r=>c(r.id),r=>B(r.id,"unassign"),r=>B(r.id,"repair"),r=>B(r.id,"assign"),r=>B(r.id,"dispose")]}class Ye extends Ue{constructor(t){super(),Be(this,t,Me,Fe,Ne,{})}}export{Ye as component};
