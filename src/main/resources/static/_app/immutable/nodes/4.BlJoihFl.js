import{s as nt,e as at,n as Be,c as Ne,o as ot,f as qe,r as we}from"../chunks/scheduler.tEsTVdbL.js";import{S as it,i as rt,s as y,e as _,t as ae,f as I,c as p,a as S,l as H,d as f,b as ne,m,n as Y,g as O,h as o,r as Se,o as x,q as Pe,j as he,v as Ge,u as We}from"../chunks/index.DgfOQfiT.js";import{e as ge}from"../chunks/each.D6YF6ztN.js";import{p as ut}from"../chunks/stores.DEvQB3Qe.js";import{a as re}from"../chunks/axios.9PTFF6AP.js";import{j as ft,i as ct,u as dt}from"../chunks/store.BPjqBYyb.js";import"../chunks/auth0-spa-js.production.esm.D13UjCU2.js";import"../chunks/entry.DE2uegLE.js";function Xe(t,e,s){const l=t.slice();return l[37]=e[s],l[39]=s,l}function Ye(t,e,s){const l=t.slice();return l[10]=e[s],l[40]=e,l[41]=s,l}function Je(t,e,s){const l=t.slice();return l[42]=e[s],l}function ht(t){let e,s=t[4]?"Hide Message Form":"Send a message or a demand to the Administrator",l,c,i,a,u,b,B="Send Message",T,g,A;return{c(){e=_("button"),l=ae(s),c=y(),i=_("div"),a=_("textarea"),u=y(),b=_("button"),b.textContent=B,this.h()},l(h){e=p(h,"BUTTON",{class:!0});var r=S(e);l=ne(r,s),r.forEach(f),c=I(h),i=p(h,"DIV",{class:!0});var C=S(i);a=p(C,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),S(a).forEach(f),u=I(C),b=p(C,"BUTTON",{"data-svelte-h":!0}),H(b)!=="svelte-1i47fva"&&(b.textContent=B),C.forEach(f),this.h()},h(){m(e,"class","accordion-button svelte-o33m4w"),m(a,"class","message-textarea svelte-o33m4w"),m(a,"placeholder","Write your message here for the administrator"),m(a,"rows","4"),m(i,"class",T=qe(t[4]?"user-message-form active":"user-message-form")+" svelte-o33m4w")},m(h,r){O(h,e,r),o(e,l),O(h,c,r),O(h,i,r),o(i,a),Y(a,t[3]),o(i,u),o(i,b),g||(A=[x(e,"click",t[18]),x(a,"input",t[24]),x(b,"click",t[17])],g=!0)},p(h,r){r[0]&16&&s!==(s=h[4]?"Hide Message Form":"Send a message or a demand to the Administrator")&&he(l,s),r[0]&8&&Y(a,h[3]),r[0]&16&&T!==(T=qe(h[4]?"user-message-form active":"user-message-form")+" svelte-o33m4w")&&m(i,"class",T)},d(h){h&&(f(e),f(c),f(i)),g=!1,we(A)}}}function _t(t){let e,s="Create Asset",l,c,i,a,u,b="Asset name",B,T,g,A,h,r,C="Purchase Date",n,E,q,j,U,F="Guarantee End",Q,L,Z,M,z="Submit",V,k;return{c(){e=_("h1"),e.textContent=s,l=y(),c=_("form"),i=_("div"),a=_("div"),u=_("label"),u.textContent=b,B=y(),T=_("input"),g=y(),A=_("div"),h=_("div"),r=_("label"),r.textContent=C,n=y(),E=_("input"),q=y(),j=_("div"),U=_("label"),U.textContent=F,Q=y(),L=_("input"),Z=y(),M=_("button"),M.textContent=z,this.h()},l(R){e=p(R,"H1",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-2752g2"&&(e.textContent=s),l=I(R),c=p(R,"FORM",{class:!0});var D=S(c);i=p(D,"DIV",{class:!0});var J=S(i);a=p(J,"DIV",{class:!0});var te=S(a);u=p(te,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),H(u)!=="svelte-irrc7u"&&(u.textContent=b),B=I(te),T=p(te,"INPUT",{class:!0,id:!0,type:!0}),te.forEach(f),J.forEach(f),g=I(D),A=p(D,"DIV",{class:!0});var ee=S(A);h=p(ee,"DIV",{class:!0});var $=S(h);r=p($,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),H(r)!=="svelte-1hiaxaq"&&(r.textContent=C),n=I($),E=p($,"INPUT",{class:!0,id:!0,type:!0}),$.forEach(f),q=I(ee),j=p(ee,"DIV",{class:!0});var oe=S(j);U=p(oe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),H(U)!=="svelte-enlo2c"&&(U.textContent=F),Q=I(oe),L=p(oe,"INPUT",{class:!0,id:!0,type:!0}),oe.forEach(f),ee.forEach(f),Z=I(D),M=p(D,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(M)!=="svelte-7ibw7x"&&(M.textContent=z),D.forEach(f),this.h()},h(){m(e,"class","mt-3"),m(u,"class","form-label"),m(u,"for","assetName"),m(T,"class","form-control"),m(T,"id","assetName"),m(T,"type","text"),m(a,"class","col"),m(i,"class","row mb-3"),m(r,"class","form-label"),m(r,"for","earnings"),m(E,"class","form-control"),m(E,"id","purchaseDate"),m(E,"type","date"),m(h,"class","col"),m(U,"class","form-label"),m(U,"for","earnings"),m(L,"class","form-control"),m(L,"id","guraranteeEnd"),m(L,"type","date"),m(j,"class","col"),m(A,"class","row mb-3"),m(M,"type","button"),m(M,"class","btn btn-primary"),m(c,"class","mb-5")},m(R,D){O(R,e,D),O(R,l,D),O(R,c,D),o(c,i),o(i,a),o(a,u),o(a,B),o(a,T),Y(T,t[10].assetName),o(c,g),o(c,A),o(A,h),o(h,r),o(h,n),o(h,E),Y(E,t[10].purchaseDate),o(A,q),o(A,j),o(j,U),o(j,Q),o(j,L),Y(L,t[10].guaranteeEnd),o(c,Z),o(c,M),V||(k=[x(T,"input",t[21]),x(E,"input",t[22]),x(L,"input",t[23]),x(M,"click",t[11])],V=!0)},p(R,D){D[0]&1024&&T.value!==R[10].assetName&&Y(T,R[10].assetName),D[0]&1024&&Y(E,R[10].purchaseDate),D[0]&1024&&Y(L,R[10].guaranteeEnd)},d(R){R&&(f(e),f(l),f(c)),V=!1,we(k)}}}function Ke(t){let e,s="Actions";return{c(){e=_("th"),e.textContent=s,this.h()},l(l){e=p(l,"TH",{scope:!0,"data-svelte-h":!0}),H(e)!=="svelte-l137bu"&&(e.textContent=s),this.h()},h(){m(e,"scope","col")},m(l,c){O(l,e,c)},d(l){l&&f(e)}}}function Qe(t){let e,s,l,c,i,a,u,b;function B(n,E){return n[10].assetState==="Unassigned"?mt:pt}let T=B(t),g=T(t),A=(t[10].assetState==="Assigned"||t[10].assetState==="InRepair")&&$e(t),h=t[10].assetState==="Assigned"&&xe(t),r=t[10].assetState==="InRepair"&&et(t),C=t[10].assetState!=="Disposed"&&tt(t);return{c(){e=_("td"),g.c(),s=y(),l=_("td"),A&&A.c(),c=y(),i=_("td"),h&&h.c(),a=y(),r&&r.c(),u=y(),b=_("td"),C&&C.c()},l(n){e=p(n,"TD",{});var E=S(e);g.l(E),E.forEach(f),s=I(n),l=p(n,"TD",{});var q=S(l);A&&A.l(q),q.forEach(f),c=I(n),i=p(n,"TD",{});var j=S(i);h&&h.l(j),a=I(j),r&&r.l(j),j.forEach(f),u=I(n),b=p(n,"TD",{});var U=S(b);C&&C.l(U),U.forEach(f)},m(n,E){O(n,e,E),g.m(e,null),O(n,s,E),O(n,l,E),A&&A.m(l,null),O(n,c,E),O(n,i,E),h&&h.m(i,null),o(i,a),r&&r.m(i,null),O(n,u,E),O(n,b,E),C&&C.m(b,null)},p(n,E){T===(T=B(n))&&g?g.p(n,E):(g.d(1),g=T(n),g&&(g.c(),g.m(e,null))),n[10].assetState==="Assigned"||n[10].assetState==="InRepair"?A?A.p(n,E):(A=$e(n),A.c(),A.m(l,null)):A&&(A.d(1),A=null),n[10].assetState==="Assigned"?h?h.p(n,E):(h=xe(n),h.c(),h.m(i,a)):h&&(h.d(1),h=null),n[10].assetState==="InRepair"?r?r.p(n,E):(r=et(n),r.c(),r.m(i,null)):r&&(r.d(1),r=null),n[10].assetState!=="Disposed"?C?C.p(n,E):(C=tt(n),C.c(),C.m(b,null)):C&&(C.d(1),C=null)},d(n){n&&(f(e),f(s),f(l),f(c),f(i),f(u),f(b)),g.d(),A&&A.d(),h&&h.d(),r&&r.d(),C&&C.d()}}}function pt(t){let e;return{c(){e=_("span")},l(s){e=p(s,"SPAN",{}),S(e).forEach(f)},m(s,l){O(s,e,l)},p:Be,d(s){s&&f(e)}}}function mt(t){let e,s,l="select Email to assign",c,i,a,u,b,B,T=ge(t[7]),g=[];for(let r=0;r<T.length;r+=1)g[r]=Ze(Je(t,T,r));function A(){t[28].call(e,t[10])}function h(){return t[29](t[10])}return{c(){e=_("select"),s=_("option"),s.textContent=l;for(let r=0;r<g.length;r+=1)g[r].c();c=y(),i=_("button"),a=ae("Assign"),this.h()},l(r){e=p(r,"SELECT",{});var C=S(e);s=p(C,"OPTION",{"data-svelte-h":!0}),H(s)!=="svelte-zpfev4"&&(s.textContent=l);for(let E=0;E<g.length;E+=1)g[E].l(C);C.forEach(f),c=I(r),i=p(r,"BUTTON",{type:!0,class:!0});var n=S(i);a=ne(n,"Assign"),n.forEach(f),this.h()},h(){s.__value="",Y(s,s.__value),t[5][t[10].id]===void 0&&at(A),m(i,"type","button"),m(i,"class","btn btn-primary"),i.disabled=u=!t[5][t[10].id]},m(r,C){O(r,e,C),o(e,s);for(let n=0;n<g.length;n+=1)g[n]&&g[n].m(e,null);Se(e,t[5][t[10].id],!0),O(r,c,C),O(r,i,C),o(i,a),b||(B=[x(e,"change",A),x(i,"click",h)],b=!0)},p(r,C){if(t=r,C[0]&128){T=ge(t[7]);let n;for(n=0;n<T.length;n+=1){const E=Je(t,T,n);g[n]?g[n].p(E,C):(g[n]=Ze(E),g[n].c(),g[n].m(e,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=T.length}C[0]&224&&Se(e,t[5][t[10].id]),C[0]&224&&u!==(u=!t[5][t[10].id])&&(i.disabled=u)},d(r){r&&(f(e),f(c),f(i)),Pe(g,r),b=!1,we(B)}}}function Ze(t){let e,s=t[42].email+"",l,c;return{c(){e=_("option"),l=ae(s),this.h()},l(i){e=p(i,"OPTION",{});var a=S(e);l=ne(a,s),a.forEach(f),this.h()},h(){e.__value=c=t[42].email,Y(e,e.__value)},m(i,a){O(i,e,a),o(e,l)},p(i,a){a[0]&128&&s!==(s=i[42].email+"")&&he(l,s),a[0]&128&&c!==(c=i[42].email)&&(e.__value=c,Y(e,e.__value))},d(i){i&&f(e)}}}function $e(t){let e,s,l,c,i;function a(){return t[30](t[10])}return{c(){e=_("button"),s=ae("Unassign"),this.h()},l(u){e=p(u,"BUTTON",{type:!0,class:!0});var b=S(e);s=ne(b,"Unassign"),b.forEach(f),this.h()},h(){m(e,"type","button"),m(e,"class","btn btn-warning"),e.disabled=l=t[10].assetState!=="Assigned"&&t[10].assetState!=="InRepair"},m(u,b){O(u,e,b),o(e,s),c||(i=x(e,"click",a),c=!0)},p(u,b){t=u,b[0]&192&&l!==(l=t[10].assetState!=="Assigned"&&t[10].assetState!=="InRepair")&&(e.disabled=l)},d(u){u&&f(e),c=!1,i()}}}function xe(t){let e,s="To Repair",l,c;function i(){return t[31](t[10])}return{c(){e=_("button"),e.textContent=s,this.h()},l(a){e=p(a,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1j17yxo"&&(e.textContent=s),this.h()},h(){m(e,"type","button"),m(e,"class","btn btn-info")},m(a,u){O(a,e,u),l||(c=x(e,"click",i),l=!0)},p(a,u){t=a},d(a){a&&f(e),l=!1,c()}}}function et(t){let e,s="Repaired",l,c;function i(){return t[32](t[10])}return{c(){e=_("button"),e.textContent=s,this.h()},l(a){e=p(a,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-15i7xfe"&&(e.textContent=s),this.h()},h(){m(e,"type","button"),m(e,"class","btn btn-success")},m(a,u){O(a,e,u),l||(c=x(e,"click",i),l=!0)},p(a,u){t=a},d(a){a&&f(e),l=!1,c()}}}function tt(t){let e,s="Dispose",l,c;function i(){return t[33](t[10])}return{c(){e=_("button"),e.textContent=s,this.h()},l(a){e=p(a,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-vl6hqu"&&(e.textContent=s),this.h()},h(){m(e,"type","button"),m(e,"class","btn btn-danger")},m(a,u){O(a,e,u),l||(c=x(e,"click",i),l=!0)},p(a,u){t=a},d(a){a&&f(e),l=!1,c()}}}function st(t){let e,s,l=t[10].assetName+"",c,i,a,u=t[10].assetState+"",b,B,T,g=t[10].purchaseDate+"",A,h,r,C=t[10].guaranteeEnd+"",n,E,q,j=(t[7].find(Z)?t[7].find(M).email:"Not Assinged")+"",U,F,Q=t[8]&&t[9].user_roles&&t[9].user_roles.includes("admin"),L;function Z(...V){return t[26](t[10],...V)}function M(...V){return t[27](t[10],...V)}let z=Q&&Qe(t);return{c(){e=_("tr"),s=_("td"),c=ae(l),i=y(),a=_("td"),b=ae(u),B=y(),T=_("td"),A=ae(g),h=y(),r=_("td"),n=ae(C),E=y(),q=_("td"),U=ae(j),F=y(),z&&z.c(),L=y()},l(V){e=p(V,"TR",{});var k=S(e);s=p(k,"TD",{});var R=S(s);c=ne(R,l),R.forEach(f),i=I(k),a=p(k,"TD",{});var D=S(a);b=ne(D,u),D.forEach(f),B=I(k),T=p(k,"TD",{});var J=S(T);A=ne(J,g),J.forEach(f),h=I(k),r=p(k,"TD",{});var te=S(r);n=ne(te,C),te.forEach(f),E=I(k),q=p(k,"TD",{});var ee=S(q);U=ne(ee,j),ee.forEach(f),F=I(k),z&&z.l(k),L=I(k),k.forEach(f)},m(V,k){O(V,e,k),o(e,s),o(s,c),o(e,i),o(e,a),o(a,b),o(e,B),o(e,T),o(T,A),o(e,h),o(e,r),o(r,n),o(e,E),o(e,q),o(q,U),o(e,F),z&&z.m(e,null),o(e,L)},p(V,k){t=V,k[0]&64&&l!==(l=t[10].assetName+"")&&he(c,l),k[0]&64&&u!==(u=t[10].assetState+"")&&he(b,u),k[0]&64&&g!==(g=t[10].purchaseDate+"")&&he(A,g),k[0]&64&&C!==(C=t[10].guaranteeEnd+"")&&he(n,C),k[0]&192&&j!==(j=(t[7].find(Z)?t[7].find(M).email:"Not Assinged")+"")&&he(U,j),k[0]&768&&(Q=t[8]&&t[9].user_roles&&t[9].user_roles.includes("admin")),Q?z?z.p(t,k):(z=Qe(t),z.c(),z.m(e,L)):z&&(z.d(1),z=null)},d(V){V&&f(e),z&&z.d()}}}function lt(t){let e,s,l=t[39]+1+"",c,i;return{c(){e=_("li"),s=_("a"),c=ae(l),i=y(),this.h()},l(a){e=p(a,"LI",{class:!0});var u=S(e);s=p(u,"A",{class:!0,href:!0});var b=S(s);c=ne(b,l),b.forEach(f),i=I(u),u.forEach(f),this.h()},h(){m(s,"class","page-link"),m(s,"href","/assets?pageNumber="+(t[39]+1)),Ge(s,"active",t[0]==t[39]+1),m(e,"class","page-item")},m(a,u){O(a,e,u),o(e,s),o(s,c),o(e,i)},p(a,u){u[0]&1&&Ge(s,"active",a[0]==a[39]+1)},d(a){a&&f(e)}}}function vt(t){let e,s,l,c,i='<label for="assetState" class="col-form-label">Asset State:</label>',a,u,b,B,T="All",g,A="Assigned",h,r="Unassigned",C,n="In Repair",E,q="Disposed",j,U,F,Q,L,Z,M,z="All Assets",V,k,R,D,J,te="Name",ee,$,oe="State",Ce,ie,Te="Purchase Date",Ee,d,w="Guarantee End",ue,fe,Ue="Person",De,ye=t[8]&&t[9].user_roles&&t[9].user_roles.includes("admin"),Ie,_e,Ae,pe,ce,Oe,je;function ze(v,P){if(P[0]&768&&(e=null),e==null&&(e=!!(v[8]&&v[9].user_roles&&v[9].user_roles.includes("admin"))),e)return _t;if(v[8])return ht}let me=ze(t,[-1,-1]),X=me&&me(t),K=ye&&Ke(),ve=ge(t[6]),G=[];for(let v=0;v<ve.length;v+=1)G[v]=st(Ye(t,ve,v));let be=ge(Array(t[1])),W=[];for(let v=0;v<be.length;v+=1)W[v]=lt(Xe(t,be,v));return{c(){X&&X.c(),s=y(),l=_("div"),c=_("div"),c.innerHTML=i,a=y(),u=_("div"),b=_("select"),B=_("option"),B.textContent=T,g=_("option"),g.textContent=A,h=_("option"),h.textContent=r,C=_("option"),C.textContent=n,E=_("option"),E.textContent=q,j=y(),U=_("div"),F=_("a"),Q=ae("Apply"),Z=y(),M=_("h1"),M.textContent=z,V=y(),k=_("table"),R=_("thead"),D=_("tr"),J=_("th"),J.textContent=te,ee=y(),$=_("th"),$.textContent=oe,Ce=y(),ie=_("th"),ie.textContent=Te,Ee=y(),d=_("th"),d.textContent=w,ue=y(),fe=_("th"),fe.textContent=Ue,De=y(),K&&K.c(),Ie=y(),_e=_("tbody");for(let v=0;v<G.length;v+=1)G[v].c();Ae=y(),pe=_("nav"),ce=_("ul");for(let v=0;v<W.length;v+=1)W[v].c();this.h()},l(v){X&&X.l(v),s=I(v),l=p(v,"DIV",{class:!0});var P=S(l);c=p(P,"DIV",{class:!0,"data-svelte-h":!0}),H(c)!=="svelte-1dnqikf"&&(c.innerHTML=i),a=I(P),u=p(P,"DIV",{class:!0});var N=S(u);b=p(N,"SELECT",{class:!0,id:!0,type:!0});var se=S(b);B=p(se,"OPTION",{"data-svelte-h":!0}),H(B)!=="svelte-zg56oz"&&(B.textContent=T),g=p(se,"OPTION",{"data-svelte-h":!0}),H(g)!=="svelte-1o96vym"&&(g.textContent=A),h=p(se,"OPTION",{"data-svelte-h":!0}),H(h)!=="svelte-1ypw53i"&&(h.textContent=r),C=p(se,"OPTION",{"data-svelte-h":!0}),H(C)!=="svelte-ovilxi"&&(C.textContent=n),E=p(se,"OPTION",{"data-svelte-h":!0}),H(E)!=="svelte-hoxvee"&&(E.textContent=q),se.forEach(f),N.forEach(f),j=I(P),U=p(P,"DIV",{class:!0});var Re=S(U);F=p(Re,"A",{class:!0,href:!0,role:!0});var He=S(F);Q=ne(He,"Apply"),He.forEach(f),Re.forEach(f),P.forEach(f),Z=I(v),M=p(v,"H1",{"data-svelte-h":!0}),H(M)!=="svelte-10ruias"&&(M.textContent=z),V=I(v),k=p(v,"TABLE",{class:!0});var ke=S(k);R=p(ke,"THEAD",{});var Le=S(R);D=p(Le,"TR",{});var le=S(D);J=p(le,"TH",{scope:!0,"data-svelte-h":!0}),H(J)!=="svelte-z0rb3w"&&(J.textContent=te),ee=I(le),$=p(le,"TH",{scope:!0,"data-svelte-h":!0}),H($)!=="svelte-66wttk"&&($.textContent=oe),Ce=I(le),ie=p(le,"TH",{scope:!0,"data-svelte-h":!0}),H(ie)!=="svelte-1euyrxw"&&(ie.textContent=Te),Ee=I(le),d=p(le,"TH",{scope:!0,"data-svelte-h":!0}),H(d)!=="svelte-q407ge"&&(d.textContent=w),ue=I(le),fe=p(le,"TH",{scope:!0,"data-svelte-h":!0}),H(fe)!=="svelte-1e495jq"&&(fe.textContent=Ue),De=I(le),K&&K.l(le),le.forEach(f),Le.forEach(f),Ie=I(ke),_e=p(ke,"TBODY",{});var Me=S(_e);for(let de=0;de<G.length;de+=1)G[de].l(Me);Me.forEach(f),ke.forEach(f),Ae=I(v),pe=p(v,"NAV",{});var Ve=S(pe);ce=p(Ve,"UL",{class:!0});var Fe=S(ce);for(let de=0;de<W.length;de+=1)W[de].l(Fe);Fe.forEach(f),Ve.forEach(f),this.h()},h(){m(c,"class","col-auto"),B.__value="",Y(B,B.__value),g.__value="Assigned",Y(g,g.__value),h.__value="Unassigned",Y(h,h.__value),C.__value="InRepair",Y(C,C.__value),E.__value="Disposed",Y(E,E.__value),m(b,"class","form-select"),m(b,"id","state"),m(b,"type","text"),t[2]===void 0&&at(()=>t[25].call(b)),m(u,"class","col-3"),m(F,"class","btn btn-primary"),m(F,"href",L="/assets?pageNumber=1&assetState="+t[2]),m(F,"role","button"),m(U,"class","col-3"),m(l,"class","row my-3"),m(J,"scope","col"),m($,"scope","col"),m(ie,"scope","col"),m(d,"scope","col"),m(fe,"scope","col"),m(k,"class","table"),m(ce,"class","pagination")},m(v,P){X&&X.m(v,P),O(v,s,P),O(v,l,P),o(l,c),o(l,a),o(l,u),o(u,b),o(b,B),o(b,g),o(b,h),o(b,C),o(b,E),Se(b,t[2],!0),o(l,j),o(l,U),o(U,F),o(F,Q),O(v,Z,P),O(v,M,P),O(v,V,P),O(v,k,P),o(k,R),o(R,D),o(D,J),o(D,ee),o(D,$),o(D,Ce),o(D,ie),o(D,Ee),o(D,d),o(D,ue),o(D,fe),o(D,De),K&&K.m(D,null),o(k,Ie),o(k,_e);for(let N=0;N<G.length;N+=1)G[N]&&G[N].m(_e,null);O(v,Ae,P),O(v,pe,P),o(pe,ce);for(let N=0;N<W.length;N+=1)W[N]&&W[N].m(ce,null);Oe||(je=x(b,"change",t[25]),Oe=!0)},p(v,P){if(me===(me=ze(v,P))&&X?X.p(v,P):(X&&X.d(1),X=me&&me(v),X&&(X.c(),X.m(s.parentNode,s))),P[0]&4&&Se(b,v[2]),P[0]&4&&L!==(L="/assets?pageNumber=1&assetState="+v[2])&&m(F,"href",L),P[0]&768&&(ye=v[8]&&v[9].user_roles&&v[9].user_roles.includes("admin")),ye?K||(K=Ke(),K.c(),K.m(D,null)):K&&(K.d(1),K=null),P[0]&127968){ve=ge(v[6]);let N;for(N=0;N<ve.length;N+=1){const se=Ye(v,ve,N);G[N]?G[N].p(se,P):(G[N]=st(se),G[N].c(),G[N].m(_e,null))}for(;N<G.length;N+=1)G[N].d(1);G.length=ve.length}if(P[0]&3){be=ge(Array(v[1]));let N;for(N=0;N<be.length;N+=1){const se=Xe(v,be,N);W[N]?W[N].p(se,P):(W[N]=lt(se),W[N].c(),W[N].m(ce,null))}for(;N<W.length;N+=1)W[N].d(1);W.length=be.length}},i:Be,o:Be,d(v){v&&(f(s),f(l),f(Z),f(M),f(V),f(k),f(Ae),f(pe)),X&&X.d(v),K&&K.d(),Pe(G,v),Pe(W,v),Oe=!1,je()}}}let bt=10;function gt(t,e,s){let l,c,i,a;Ne(t,ft,d=>s(19,l=d)),Ne(t,ut,d=>s(20,c=d)),Ne(t,ct,d=>s(8,i=d)),Ne(t,dt,d=>s(9,a=d));const u=c.url.origin;let b,B=0,T,g="",A=!1,h={},r=[],C=[],n={assetName:null,purchaseDate:null,guaranteeEnd:null,assetState:null,personId:null};ot(()=>{q()});function E(){let d=`?pageSize=${bt}&pageNumber=${b-1}`;T&&(d+="&assetState="+T),re.get(`${u}/api/asset`+d,{headers:{"Content-Type":"application/json"+d,Authorization:"Bearer "+l}}).then(w=>{s(6,r=w.data.content),r.forEach(ue=>{s(5,h[ue.id]="",h),s(1,B=w.data.totalPages)})}).catch(w=>console.error("Error fetching assets",w))}function q(){re.get(u+"/api/person",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(d=>s(7,C=d.data)).catch(d=>{alert("Could not get persons"),console.log(d)})}function j(){re.post(u+"/api/asset",n,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(d=>{alert("Asset created"),E()}).catch(d=>{alert("Could not create asset"),console.log(d)})}function U(d){re.put(`${u}/api/asset/${d}/unassign`,d,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(w=>{alert("Asset unassigned"),E()}).catch(w=>{alert("Failed to unassign asset"),console.log(w)})}function F(d){if(!h[d]){alert("Please select an email to assign");return}const w={assetId:d,personEmail:h[d]};re.put(`${u}/api/service/assignasset`,w,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(ue=>{alert("Asset assigned"),E()}).catch(ue=>{alert("Failed to assign asset"),console.error(ue)})}function Q(d){re.put(`${u}/api/asset/${d}/repair`,d,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(w=>{alert("Asset in in repair"),E()}).catch(w=>{alert("Failed to set assetstate to in Repair"),console.log(w)})}function L(d){re.put(`${u}/api/asset/${d}/repaired`,d,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(w=>{alert("Asset is repaired"),E()}).catch(w=>{alert("Failed to set assetstate to in Assigned"),console.log(w)})}function Z(d){re.put(`${u}/api/asset/${d}/dispose`,d,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(w=>{alert("Asset is disposed"),E()}).catch(w=>{alert("Failed to set assetstate to disposed"),console.log(w)})}function M(){const d={to:"chiraant@students.zhaw.ch",subject:"Message from User",message:g};re.post(`${u}/api/send-email`,d,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+l}}).then(()=>{alert("Message sent successfully!"),s(3,g=""),z()}).catch(w=>{console.error("Failed to send message:",w),alert("Failed to send message.")})}function z(){s(4,A=!A)}function V(){n.assetName=this.value,s(10,n)}function k(){n.purchaseDate=this.value,s(10,n)}function R(){n.guaranteeEnd=this.value,s(10,n)}function D(){g=this.value,s(3,g)}function J(){T=We(this),s(2,T),s(19,l),s(20,c)}const te=(d,w)=>w.id===d.personId,ee=(d,w)=>w.id===d.personId;function $(d){h[d.id]=We(this),s(5,h),s(7,C)}const oe=d=>F(d.id),Ce=d=>U(d.id),ie=d=>Q(d.id),Te=d=>L(d.id),Ee=d=>Z(d.id);return t.$$.update=()=>{if(t.$$.dirty[0]&1572864&&l!==""){let d=c.url.searchParams;d.has("pageNumber")?s(0,b=d.get("pageNumber")):s(0,b="1"),d.has("assetState")&&s(2,T=d.get("assetState")),E()}},[b,B,T,g,A,h,r,C,i,a,n,j,U,F,Q,L,Z,M,z,l,c,V,k,R,D,J,te,ee,$,oe,Ce,ie,Te,Ee]}class yt extends it{constructor(e){super(),rt(this,e,gt,vt,nt,{},null,[-1,-1])}}export{yt as component};
