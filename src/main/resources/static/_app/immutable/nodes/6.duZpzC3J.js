import{s as jt,n as Pt,r as wt,c as at,o as Ht}from"../chunks/scheduler.tEsTVdbL.js";import{S as It,i as zt,e as i,s as E,c as u,l as j,f as T,a as B,d as p,m as o,g as I,h as l,n as Q,o as X,r as Ut,t as pt,b as _t,j as vt}from"../chunks/index.ATyCX7m3.js";import{e as At}from"../chunks/each.D6YF6ztN.js";import{a as nt}from"../chunks/axios.9PTFF6AP.js";import{p as Vt}from"../chunks/stores.QV0qZg_U.js";import{j as Ot,i as Rt,u as Ft}from"../chunks/store.BSOACqNo.js";function xt(n,t,s){const c=n.slice();return c[3]=t[s],c}function Bt(n){let t,s="Actions";return{c(){t=i("th"),t.textContent=s,this.h()},l(c){t=u(c,"TH",{scope:!0,"data-svelte-h":!0}),j(t)!=="svelte-l137bu"&&(t.textContent=s),this.h()},h(){o(t,"scope","col")},m(c,h){I(c,t,h)},d(c){c&&p(t)}}}function Dt(n){let t,s,c="Delete",h,v;function C(){return n[9](n[3])}return{c(){t=i("td"),s=i("button"),s.textContent=c,this.h()},l(d){t=u(d,"TD",{});var k=B(t);s=u(k,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(s)!=="svelte-y10a52"&&(s.textContent=c),k.forEach(p),this.h()},h(){o(s,"type","button"),o(s,"class","btn btn-danger")},m(d,k){I(d,t,k),l(t,s),h||(v=X(s,"click",C),h=!0)},p(d,k){n=d},d(d){d&&p(t),h=!1,v()}}}function Lt(n){let t,s,c=n[3].firstName+"",h,v,C,d=n[3].lastName+"",k,N,b,L=n[3].email+"",P,A,V=n[1]&&n[2].user_roles&&n[2].user_roles.includes("admin"),w,r=V&&Dt(n);return{c(){t=i("tr"),s=i("td"),h=pt(c),v=E(),C=i("td"),k=pt(d),N=E(),b=i("td"),P=pt(L),A=E(),r&&r.c(),w=E()},l(g){t=u(g,"TR",{});var e=B(t);s=u(e,"TD",{});var f=B(s);h=_t(f,c),f.forEach(p),v=T(e),C=u(e,"TD",{});var O=B(C);k=_t(O,d),O.forEach(p),N=T(e),b=u(e,"TD",{});var G=B(b);P=_t(G,L),G.forEach(p),A=T(e),r&&r.l(e),w=T(e),e.forEach(p)},m(g,e){I(g,t,e),l(t,s),l(s,h),l(t,v),l(t,C),l(C,k),l(t,N),l(t,b),l(b,P),l(t,A),r&&r.m(t,null),l(t,w)},p(g,e){e&1&&c!==(c=g[3].firstName+"")&&vt(h,c),e&1&&d!==(d=g[3].lastName+"")&&vt(k,d),e&1&&L!==(L=g[3].email+"")&&vt(P,L),e&6&&(V=g[1]&&g[2].user_roles&&g[2].user_roles.includes("admin")),V?r?r.p(g,e):(r=Dt(g),r.c(),r.m(t,w)):r&&(r.d(1),r=null)},d(g){g&&p(t),r&&r.d()}}}function St(n){let t,s="Create Person",c,h,v,C,d,k="First Name",N,b,L,P,A,V="Last Name",w,r,g,e,f,O="Email",G,H,st,ot,rt,z,bt="Submit",Z,F,Ct="All Persons",$,U,W,D,S,Nt="First Name",it,q,gt="Last Name",ut,M,Et="Email",ct,ft=n[1]&&n[2].user_roles&&n[2].user_roles.includes("admin"),dt,J,ht,Tt,x=ft&&Bt(),K=At(n[0]),y=[];for(let a=0;a<K.length;a+=1)y[a]=Lt(xt(n,K,a));return{c(){t=i("h1"),t.textContent=s,c=E(),h=i("form"),v=i("div"),C=i("div"),d=i("label"),d.textContent=k,N=E(),b=i("input"),L=E(),P=i("div"),A=i("label"),A.textContent=V,w=E(),r=i("input"),g=E(),e=i("div"),f=i("label"),f.textContent=O,G=E(),H=i("input"),st=E(),ot=i("br"),rt=E(),z=i("button"),z.textContent=bt,Z=E(),F=i("h1"),F.textContent=Ct,$=E(),U=i("table"),W=i("thead"),D=i("tr"),S=i("th"),S.textContent=Nt,it=E(),q=i("th"),q.textContent=gt,ut=E(),M=i("th"),M.textContent=Et,ct=E(),x&&x.c(),dt=E(),J=i("tbody");for(let a=0;a<y.length;a+=1)y[a].c();this.h()},l(a){t=u(a,"H1",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1aynzwh"&&(t.textContent=s),c=T(a),h=u(a,"FORM",{class:!0});var _=B(h);v=u(_,"DIV",{class:!0});var m=B(v);C=u(m,"DIV",{class:!0});var Y=B(C);d=u(Y,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),j(d)!=="svelte-11trqee"&&(d.textContent=k),N=T(Y),b=u(Y,"INPUT",{class:!0,id:!0,type:!0}),Y.forEach(p),L=T(m),P=u(m,"DIV",{class:!0});var tt=B(P);A=u(tt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),j(A)!=="svelte-1i4b2vc"&&(A.textContent=V),w=T(tt),r=u(tt,"INPUT",{class:!0,id:!0,type:!0}),tt.forEach(p),g=T(m),e=u(m,"DIV",{class:!0});var et=B(e);f=u(et,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),j(f)!=="svelte-13xn7a2"&&(f.textContent=O),G=T(et),H=u(et,"INPUT",{class:!0,id:!0,type:!0}),et.forEach(p),m.forEach(p),st=T(_),ot=u(_,"BR",{}),rt=T(_),z=u(_,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(z)!=="svelte-2hem41"&&(z.textContent=bt),_.forEach(p),Z=T(a),F=u(a,"H1",{"data-svelte-h":!0}),j(F)!=="svelte-1131w5t"&&(F.textContent=Ct),$=T(a),U=u(a,"TABLE",{class:!0});var lt=B(U);W=u(lt,"THEAD",{});var yt=B(W);D=u(yt,"TR",{});var R=B(D);S=u(R,"TH",{scope:!0,"data-svelte-h":!0}),j(S)!=="svelte-xo3skm"&&(S.textContent=Nt),it=T(R),q=u(R,"TH",{scope:!0,"data-svelte-h":!0}),j(q)!=="svelte-ujhhva"&&(q.textContent=gt),ut=T(R),M=u(R,"TH",{scope:!0,"data-svelte-h":!0}),j(M)!=="svelte-1bg1nz7"&&(M.textContent=Et),ct=T(R),x&&x.l(R),R.forEach(p),yt.forEach(p),dt=T(lt),J=u(lt,"TBODY",{});var kt=B(J);for(let mt=0;mt<y.length;mt+=1)y[mt].l(kt);kt.forEach(p),lt.forEach(p),this.h()},h(){o(t,"class","mt-3"),o(d,"class","form-label"),o(d,"for","firstName"),o(b,"class","form-control"),o(b,"id","firstName"),o(b,"type","text"),o(C,"class","col-sm-6"),o(A,"class","form-label"),o(A,"for","lastName"),o(r,"class","form-control"),o(r,"id","lastName"),o(r,"type","text"),o(P,"class","col-sm-6"),o(f,"class","form-label"),o(f,"for","email"),o(H,"class","form-control"),o(H,"id","email"),o(H,"type","text"),o(e,"class","col-sm-12"),o(v,"class","row mb-3"),o(z,"type","button"),o(z,"class","btn btn-primary"),o(h,"class","mb-5"),o(S,"scope","col"),o(q,"scope","col"),o(M,"scope","col"),o(U,"class","table")},m(a,_){I(a,t,_),I(a,c,_),I(a,h,_),l(h,v),l(v,C),l(C,d),l(C,N),l(C,b),Q(b,n[3].firstName),l(v,L),l(v,P),l(P,A),l(P,w),l(P,r),Q(r,n[3].lastName),l(v,g),l(v,e),l(e,f),l(e,G),l(e,H),Q(H,n[3].email),l(h,st),l(h,ot),l(h,rt),l(h,z),I(a,Z,_),I(a,F,_),I(a,$,_),I(a,U,_),l(U,W),l(W,D),l(D,S),l(D,it),l(D,q),l(D,ut),l(D,M),l(D,ct),x&&x.m(D,null),l(U,dt),l(U,J);for(let m=0;m<y.length;m+=1)y[m]&&y[m].m(J,null);ht||(Tt=[X(b,"input",n[6]),X(r,"input",n[7]),X(H,"input",n[8]),X(z,"click",n[4])],ht=!0)},p(a,[_]){if(_&8&&b.value!==a[3].firstName&&Q(b,a[3].firstName),_&8&&r.value!==a[3].lastName&&Q(r,a[3].lastName),_&8&&H.value!==a[3].email&&Q(H,a[3].email),_&6&&(ft=a[1]&&a[2].user_roles&&a[2].user_roles.includes("admin")),ft?x||(x=Bt(),x.c(),x.m(D,null)):x&&(x.d(1),x=null),_&39){K=At(a[0]);let m;for(m=0;m<K.length;m+=1){const Y=xt(a,K,m);y[m]?y[m].p(Y,_):(y[m]=Lt(Y),y[m].c(),y[m].m(J,null))}for(;m<y.length;m+=1)y[m].d(1);y.length=K.length}},i:Pt,o:Pt,d(a){a&&(p(t),p(c),p(h),p(Z),p(F),p($),p(U)),x&&x.d(),Ut(y,a),ht=!1,wt(Tt)}}}function qt(n,t,s){let c,h,v,C;at(n,Ot,e=>s(10,c=e)),at(n,Vt,e=>s(11,h=e)),at(n,Rt,e=>s(1,v=e)),at(n,Ft,e=>s(2,C=e));const d=h.url.origin;let k=[],N={firstName:null,lastName:null,email:null};Ht(()=>{b()});function b(){var e={method:"get",url:d+"/api/person",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c}};nt(e).then(function(f){s(0,k=f.data)}).catch(function(f){alert("Could not get persons"),console.log(f)})}function L(){var e={method:"get",url:"https://disify.com/api/email/"+N.email};nt(e).then(function(f){console.log("Validated email "+N.email),console.log(f.data),f.data.format&&!f.data.disposable&&f.data.dns?P():alert("Email "+N.email+" is not valid.")}).catch(function(f){alert("Could not validate email"),console.log(f)})}function P(){var e={method:"post",url:d+"/api/person",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c},data:N};nt(e).then(function(f){alert("Person added"),b()}).catch(function(f){alert("Could not create Person"),console.log(f)})}function A(e){var f={method:"delete",url:d+"/api/person/"+e,headers:{"Content-Type":"application/json",Authorization:"Bearer "+c}};nt(f).then(function(O){alert("Person deleted"),b()}).catch(function(O){alert("Could not delete Person"),console.log(O)})}function V(){N.firstName=this.value,s(3,N)}function w(){N.lastName=this.value,s(3,N)}function r(){N.email=this.value,s(3,N)}return[k,v,C,N,L,A,V,w,r,e=>A(e.id)]}class Wt extends It{constructor(t){super(),zt(this,t,qt,St,jt,{})}}export{Wt as component};
